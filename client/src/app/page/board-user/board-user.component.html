<ng-template #tipAjoutAdherent><b>Ajouter un nouvel adherent</b>
</ng-template>


<div class="container">

  <div class="card card-container">
    <div class="row">
      <div class="col-6" id="header">Informations:</div>


      <div *ngIf="tribu.adherents[0] != undefined &&
          tribu.adherents[0].completReferent" class="col-6 orange" (click)="addAdherent()" id="icon">
        {{tribu.adherents[0] !=
        undefined &&
        tribu.adherents[0].completReferent && (tribu.adherents.length==0 || tribu.adherents[1] ==
        undefined)?"Cliquez
        ici pour ajouter un
        adhérent=>
        ":""}}<fa-icon class="pointer orange" [icon]="faUserPlus" container="body"
          [ngbTooltip]="tipAjoutAdherent"></fa-icon></div>


      <div *ngIf="message" [innerHTML]="message"></div>

      <div *ngIf="infoAdherent">
        <span class="orange">* champs obligatoires</span>
      </div>
      <div *ngIf="isFailed">
        {{errorMessage}}
      </div>
      <div *ngIf="dossierIncomplet">
        Le secrétariat validera votre dossier lorsqu'il sera complet
      </div>
    </div>
  </div>


  <div class="card card-container ">
    <div class="row griser" (click)="adherentsOpen = !adherentsOpen">
      <div *ngIf="adherentsACompleter > 0" class="col-10" id="header">{{adherentsACompleter>1?"Adhérents :
        "+adherentsACompleter+" à completer":"Adhérent : "+adherentsACompleter+" à completer"}}
      </div>
      <div *ngIf="adherentsACompleter == 0" class="col-10" id="header">{{adherentsTotaux>1?"Adhérents :
        "+adherentsTotaux + " actifs":"Adhérent : "+adherentsTotaux+ " actif"}}</div>
      <div class="col-2" id="icon">
        <fa-icon *ngIf="!adherentsOpen" class="pointer green fa-xl" [icon]="faSquareCaretLeft"
          container="body"></fa-icon>
        <fa-icon *ngIf="adherentsOpen" class="pointer green fa-xl" [icon]="faSquareCaretDown"
          container="body"></fa-icon>

      </div>
    </div>

    <div *ngIf="adherentsOpen" class="row">
      <div *ngFor="let adherent of tribu.adherents | orderBy:'referent':true" [ngClass]="mobile ? 'fullSize' : ''"
        class="col-md-6 col-lg-3">
        <ng-template #tipEditAdherent><b>Modifier les informations personnelles de {{adherent.prenom}}</b>
        </ng-template>
        <ng-template #tipAjoutActivite><b>Ajouter une activité à {{adherent.prenom}}</b>
        </ng-template>
        <ng-template #tipAjoutDocument><b>Ajouter un document à {{adherent.prenom}}</b>
        </ng-template>

        <div class="cadrePermanent">
          <div class="row">
            <div class="col-10" id="header">{{adherent.referent?"Référent(e)
              légal(e) et/ou licencié(e) majeur(e)":"Licencié(e)"}}</div>
            <div class="col-2" id="icon" (click)="adherentEdit(adherent)">
              <fa-icon *ngIf="adherent.id != 0 " class="pointer orange" [icon]="faPencilSquare" container="body"
                [ngbTooltip]="tipEditAdherent"></fa-icon>
              <fa-icon *ngIf="adherent.id == 0 " (click)="removeAdherent(adherent)" class="pointer"
                [icon]="faSquareMinus" container="body"></fa-icon>
              <fa-icon *ngIf="showAdmin || showSecretaire" class="fa-lg pointer"
                (click)="openConfirmModal(confirmModal, adherent)" [icon]="faSkull"></fa-icon>
            </div>
          </div>
          <div *ngIf="!adherent.completReferent || adherent.edit" id="header">Informations personnelles</div>
          <form *ngIf="!adherent.completReferent || adherent.edit" name="adherent"
            (ngSubmit)="f.form.valid && onSubmit(adherent)" #f="ngForm" novalidate>


            <div class="form-group">
              <label for="nom">Nom <span class="orange" container="body">*</span></label>
              <input type="text" class="form-control" name="nom" [(ngModel)]="adherent.nom" required minlength="2"
                maxlength="255" #nom="ngModel" />
              <div class="alert-danger" *ngIf="nom.errors && f.submitted">
                <div *ngIf="nom.errors.required">Nom obligatoire</div>
                <div *ngIf="nom.errors.minlength">
                  Le nom doit au moins avoir 2 lettres
                </div>
                <div *ngIf="nom.errors.maxlength">
                  Le nom ne peut pas avoir plus de 255 lettres
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="prenom">Prénom <span class="orange" container="body">*</span></label>
              <input type="text" class="form-control" name="prenom" [(ngModel)]="adherent.prenom" required minlength="2"
                maxlength="255" #prenom="ngModel" />
              <div class="alert-danger" *ngIf="prenom.errors && f.submitted">
                <div *ngIf="prenom.errors.required">Prenom obligatoire</div>
                <div *ngIf="prenom.errors.minlength">
                  Le prénom doit au moins avoir 2 lettres
                </div>
                <div *ngIf="prenom.errors.maxlength">
                  Le prénom ne peut pas avoir plus de 255 lettres
                </div>
              </div>
            </div>




            <div class="form-group">

              <label for="image">Genre <span class="orange" container="body">*</span></label>

              <div class="btn-group btn-group-sm col-12" role="group" aria-label="image">
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.genre == 'Féminin' ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.genre = 'Féminin'">
                  Féminin</div>
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.genre == 'Masculin' ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.genre = 'Masculin'">
                  Masculin</div>
              </div>

            </div>

            <div class="form-group">
              <label for="naissance">Date de naissance <span class="orange" container="body">*</span></label>
              <input type="date" class="form-control" name="naissance" [(ngModel)]="adherent.naissance"
                #naissance="ngModel" required />
              <div class="alert-danger" *ngIf="naissance.errors && f.submitted">
                <div *ngIf="naissance.errors.required">Date de naissance obligatoire</div>

              </div>
            </div>

            <div class="form-group">
              <label for="lieuNaissance">Lieu de naissance <span class="orange" container="body">*</span></label>
              <input type="text" class="form-control" name="lieuNaissance" [(ngModel)]="adherent.lieuNaissance"
                #lieuNaissance="ngModel" placeholder="num du département" required />
              <div class="alert-danger" *ngIf="lieuNaissance.errors && f.submitted">
                <div *ngIf="lieuNaissance.errors.required">Lieu de naissance obligatoire</div>

              </div>
            </div>


            <div *ngIf="showAdmin || showSecretaire" ngbDropdown id="icon">
              <div id="dropdownBasic1" ngbDropdownToggle>
                Ajouter un accord <fa-icon [icon]="faSquarePlus" container="body"></fa-icon>
              </div>

              <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="float:right;">
                <div type='button' ngbDropdownItem (click)="ajoutAccord(adherent,'RGPD')">RGPD</div>
                <div type='button' ngbDropdownItem (click)="ajoutAccord(adherent,'Droit Image')">Droit Image</div>
              </div>
            </div>


            <div *ngFor="let accord of adherent.accords | orderBy:'id':false ">





              <div *ngIf="accord.nom=='RGPD' && accord.etat == null" class="form-group">
                <label for="rgpd">Données personnelles <span class="orange" container="body">*</span> <fa-icon
                    *ngIf="showAdmin || showSecretaire" (click)="openConfirmModalAccordAdherent(confirmAccordAdherentModal,adherent,accord)"
                    [icon]="faSquareMinus"></fa-icon></label>

                <div class="btn-group btn-group-sm" role="group" aria-label="rgpd">
                  <div type='button' class="btn btn-block btn-primary alod"
                    (click)="openAccordModal(RGPDModal, accord, false)">
                    Merci d'accepter l'utilisation de vos données personnelles</div>
                </div>
              </div>
              <div *ngIf="accord.nom=='RGPD' && accord.etat != null">
                Vous avez accepté l'utilisation de vos données personnelles par l'ALOD le {{accord.datePassage | date:
                'dd/MM/YYYY'}} <fa-icon (click)="openAccordModal(RGPDModal, accord, true)" class="pointer orange"
                  [icon]="faCircleQuestion"></fa-icon> <fa-icon *ngIf="showAdmin || showSecretaire"
                  (click)="openConfirmModalAccordAdherent(confirmAccordAdherentModal,adherent,accord)" [icon]="faSquareMinus"></fa-icon>
              </div>









              <div *ngIf="accord.nom=='Droit Image' && accord.etat == null" class="form-group">
                <label for="image">Droit à l'image <span class="orange" container="body">*</span> <fa-icon
                    *ngIf="showAdmin || showSecretaire" (click)="openConfirmModalAccordAdherent(confirmAccordAdherentModal,adherent,accord)"
                    [icon]="faSquareMinus"></fa-icon></label>

                <div type='button' class="btn btn-block btn-primary alod"
                  (click)="openAccordModal(ImageModal, accord, false)">
                  Merci de confirmer l'usage de votre droit à l'image<span class="orange" container="body">*</span>
                </div>
              </div>
              <div *ngIf="accord.nom=='Droit Image' && accord.etat != null">
                Vous avez {{accord.etat?"accepté":"refusé"}} l'utilisation de votre
                image par l'ALOD le {{accord.datePassage | date: 'dd/MM/YYYY'}} <fa-icon
                  (click)="openAccordModal(ImageModal, accord, true)" class="pointer orange"
                  [icon]="faCircleQuestion"></fa-icon> <fa-icon *ngIf="showAdmin || showSecretaire"
                  (click)="openConfirmModalAccordAdherent(confirmAccordAdherentModal,adherent,accord)" [icon]="faSquareMinus"></fa-icon>
              </div>
            </div>




            <div *ngIf="!adherent.referent" class="form-group cadre">
              <label for="mineur">{{adherent.prenom}} est mineur ? <fa-icon *ngIf="adherent.mineur" class="green"
                  [icon]="faCircleCheck"></fa-icon><fa-icon *ngIf="!adherent.mineur" class="orange"
                  [icon]="faCircleXmark"></fa-icon></label>

              <div class="btn-group btn-group-sm" role="group" aria-label="mineur">
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.mineur ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.mineur = true">
                  Oui</div>
                <div type='button' class="btn btn-block"
                  [ngClass]="!adherent.mineur ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.mineur = false">Non</div>
              </div>



              <div *ngIf="adherent.mineur" class="form-group">
                <label for="legalReferent">Le référent est le représentant légal ? <fa-icon
                    *ngIf="adherent.legalReferent" class="green" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="!adherent.legalReferent" class="orange" [icon]="faCircleXmark"></fa-icon></label>
                <div class="btn-group btn-group-sm" role="group" aria-label="legalReferent">
                  <div type='button' class="btn btn-block"
                    [ngClass]="adherent.legalReferent ? 'btn-primary' : ' btn-outline-secondary'"
                    (click)="adherent.legalReferent = true">Oui</div>
                  <div type='button' class="btn btn-block"
                    [ngClass]="!adherent.legalReferent ? 'btn-primary' : ' btn-outline-secondary'"
                    (click)="adherent.legalReferent = false">Non</div>
                </div>
              </div>


              <div *ngIf="adherent.mineur && !adherent.legalReferent" class="form-group">
                <label for="nomLegal">Nom</label>
                <input type="text" class="form-control" name="nomLegal" [(ngModel)]="adherent.nomLegal" required
                  minlength="1" maxlength="50" #nomLegal="ngModel" />
                <div class="alert-danger" *ngIf="nomLegal.errors && f.submitted">
                  <div *ngIf="nomLegal.errors.required">Nom du référent légal obligatoire</div>
                  <div *ngIf="nomLegal.errors.minlength">
                    Nom must be at least 1 characters
                  </div>
                  <div *ngIf="nomLegal.errors.maxlength">
                    Nom must be at most 50 characters
                  </div>
                </div>
              </div>


              <div *ngIf="adherent.mineur && !adherent.legalReferent" class="form-group">
                <label for="prenomLegal">Prenom</label>
                <input type="text" class="form-control" name="prenomLegal" [(ngModel)]="adherent.prenomLegal" required
                  minlength="1" maxlength="50" #prenomLegal="ngModel" />
                <div class="alert-danger" *ngIf="prenomLegal.errors && f.submitted">
                  <div *ngIf="prenomLegal.errors.required">Prenom du référent légal obligatoire</div>
                  <div *ngIf="prenomLegal.errors.minlength">
                    Prenom must be at least 1 characters
                  </div>
                  <div *ngIf="prenomLegal.errors.maxlength">
                    Prenom must be at most 50 characters
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="!adherent.referent" class="form-group">
              <label for="emailReferent">Utiliser le mail du référent ? <fa-icon *ngIf="adherent.emailReferent"
                  class="green" [icon]="faCircleCheck"></fa-icon><fa-icon *ngIf="!adherent.emailReferent" class="orange"
                  [icon]="faCircleXmark"></fa-icon></label>

              <div class="btn-group btn-group-sm" role="group" aria-label="emailReferent">
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.emailReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.emailReferent = true">Oui</div>
                <div type='button' class="btn btn-block"
                  [ngClass]="!adherent.emailReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.emailReferent = false">Non</div>
              </div>
            </div>

            <div *ngIf="!adherent.emailReferent" class="form-group">

              <label for="email">Email <span class="orange">* champs obligatoires</span></label>
              <input type="email" class="form-control" name="email" [(ngModel)]="adherent.email" (ngModelChange)="adherent.email = cleaning(adherent.email)"  (ngModelBlur)="adherent.email = cleaning(adherent.email)"  required minlength="10"
                maxlength="50" #email="ngModel" ngModel email />
              <div class="alert-danger" *ngIf="email.errors && f.submitted">
                <div *ngIf="email.errors.required">l'e-mail est obligatoire</div>
                <div *ngIf="email.errors.minlength">
                  Email must be at least 10 characters
                </div>
                <div *ngIf="email.errors.maxlength">
                  Email must be at most 50 characters
                </div>
                <div *ngIf="email.errors.email">
                  l'e-mail doit avoir un format valide
                </div>
              </div>
            </div>


            <div *ngIf="!adherent.referent" class="form-group">
              <label for="telephoneReferent">Utiliser le tel du référent ? <fa-icon *ngIf="adherent.telephoneReferent"
                  class="green" [icon]="faCircleCheck"></fa-icon><fa-icon *ngIf="!adherent.telephoneReferent"
                  class="orange" [icon]="faCircleXmark"></fa-icon></label>

              <div class="btn-group btn-group-sm" role="group" aria-label="telephoneReferent">
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.telephoneReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.telephoneReferent = true">Oui</div>
                <div type='button' class="btn btn-block"
                  [ngClass]="!adherent.telephoneReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.telephoneReferent = false">Non</div>
              </div>
            </div>


            <div *ngIf="!adherent.telephoneReferent" class="form-group">
              <label for="telephone">Téléphone <span class="orange" container="body">*</span></label>
              <input type="tel" class="form-control" name="telephone" (ngModelChange)="adherent.telephone = cleaning(adherent.telephone)" (ngModelBlur)="adherent.telephone = cleaning(adherent.telephone)" [(ngModel)]="adherent.telephone"
                pattern="^[0-9]{10}$" #telephone="ngModel" />

              <div class="alert-danger" *ngIf="telephone.errors && f.submitted">
                <div *ngIf="telephone.errors.required">Le numéro de téléphone est obligatoire</div>
                <div *ngIf="telephone.errors.pattern">
                  Le numéro de téléphone doit avoir un format valide (10 chiffres)
                </div>
              </div>
            </div>



            <div *ngIf="!adherent.referent" class="form-group">
              <label for="adresseReferent">Utiliser l'adresse du référent ? <fa-icon *ngIf="adherent.adresseReferent"
                  class="green" [icon]="faCircleCheck"></fa-icon><fa-icon *ngIf="!adherent.adresseReferent"
                  class="orange" [icon]="faCircleXmark"></fa-icon></label>

              <div class="btn-group btn-group-sm" role="group" aria-label="adresseReferent">
                <div type='button' class="btn btn-block"
                  [ngClass]="adherent.adresseReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.adresseReferent = true">Oui</div>
                <div type='button' class="btn btn-block"
                  [ngClass]="!adherent.adresseReferent ? 'btn-primary' : ' btn-outline-secondary'"
                  (click)="adherent.adresseReferent = false">Non</div>
              </div>
            </div>

            <div *ngIf="!adherent.adresseReferent" class="form-group">
              <label for="adresse">Adresse <span class="orange" container="body">*</span></label>
              <input type="text" class="form-control" name="adresse" [(ngModel)]="adherent.adresse" required
                minlength="10" maxlength="200" #adresse="ngModel" />
              <div class="alert-danger" *ngIf="adresse.errors && f.submitted">
                <div *ngIf="adresse.errors.required">l'adresse est obligatoire</div>
                <div *ngIf="adresse.errors.minlength">
                  L'adresse doit avoir au moins 10 caractères
                </div>
                <div *ngIf="adresse.errors.maxlength">
                  L'adresse doit avoir au maximum 200 caractères
                </div>
              </div>
            </div>


            <div *ngIf="!isAllAccordsDone(adherent.accords) && afficheAlerte" class="orange">
              Tous les champs doivent être renseignés pour permettre l'accès aux activités
            </div>
            <div *ngIf="infoAdherent">
              <span class="orange">* champs obligatoires</span>
            </div>
            <div class="form-group" (click)="afficheAlerteDonneesPerso()">
              <button [disabled]="!isAllAccordsDone(adherent.accords)"
                class="btn btn-primary btn-block">Enregistrer</button>
            </div>
            <div>
              Vous pouvez souscrire, en plus des garanties de base inclues dans votre affiliation à la Ligue de
              l'Enseignement et à l'UFOLEP, des garanties complémentaires plus importantes en cas d'accident corporel.
              Le formulaire est en ligne sur le site de l'ALOD<br />
            </div>
          </form>

          <div class="row" *ngIf="adherent.completAdhesion">
            <div id="header" class=" col-8 ">Activités de {{adherent.prenom}}</div>
            <div ngbDropdown class=" col-4 orange" id="icon">
              <div id="dropdownBasic1" ngbDropdownToggle>
                <fa-icon class="pointer orange" [icon]="faSquarePlus" container="body"
                  [ngbTooltip]="tipAjoutActivite"></fa-icon>
              </div>

              <div *ngIf="!adherent.mineur" ngbDropdownMenu aria-labelledby="dropdownBasic1" style="float:right;">
                <div *ngFor="let activite of activitesMajeur | orderBy:'nom':false">
                  <b>{{activite.nom}}</b>
                  <div *ngFor="let horaire of activite.horaires">
                    <a ngbDropdownItem (click)="choisir(adherent, horaire.id)" [disabled]="horaire.complete">
                      {{horaire.nom}} {{horaire.complete?"- Complet":""}}</a>
                  </div>

                </div>
              </div>


              <div *ngIf="adherent.mineur" ngbDropdownMenu aria-labelledby="dropdownBasic1" style="float:right;">
                <div *ngFor="let activite of activitesMineur  | orderBy:'nom':false" class="ligne pointer">
                  <b>{{activite.nom}}</b>
                  <div *ngFor="let horaire of activite.horaires">
                    <a ngbDropdownItem (click)="choisir(adherent, horaire.id)" [disabled]="horaire.complete">
                      {{horaire.nom}} {{horaire.complete?"- Complet":""}}</a>
                  </div>
                </div>
              </div>
            </div>

            <div *ngFor="let adhesion of adherent.adhesions | orderBy:'id':false ">
              <a href="https://{{adhesion.activite.lien}}" target="_blank">
                {{adhesion.activite.nom}}</a> {{adhesion.activite.horaire}}<br />(<i>{{adhesion.statutActuel}}</i>)
            </div>

          </div>


          <div class="row" *ngIf="adherent.completAdhesion">
            <div id="header" class=" col-8 ">Documents de {{adherent.prenom}}</div>
            <div ngbDropdown class=" col-4 orange" id="icon">
              <div>
                <fa-icon class="pointer orange" (click)="openModal(addPDFModal, adherent)" [icon]="faSquarePlus"
                  container="body" [ngbTooltip]="tipAjoutDocument"></fa-icon>
              </div>
            </div>
            <div class=" col-12">
              <div *ngFor="let document of adherent.documents | orderBy:'id':false " class="ligne pointer">
                <div *ngIf="!document.file">
                  <fa-icon class="green" [icon]="faEye"></fa-icon> {{document.nom}}
                  <fa-icon *ngIf="showSecretaire" [icon]="faSquareMinus"
                    (click)="deleteDoc(document, adherent)"></fa-icon>
                </div>
                <div *ngIf="document.file">
                  <fa-icon class="green" [icon]="faEye" (click)="openEditModal(editPDFModal, document)"></fa-icon>
                  {{document.nom}}
                  <fa-icon *ngIf="showSecretaire" [icon]="faSquareMinus"
                    (click)="deleteDoc(document, adherent)"></fa-icon>
                </div>

              </div>


            </div>
          </div>

        </div>
      </div>

    </div>

  </div>
















  <div *ngIf="newAdhesions.length > 0" class="card card-container ">

    <div id="header">Panier d'inscription</div>

    <div *ngFor="let adhesion of newAdhesions | orderBy:'id':false ">
      <fa-icon class="pointer orange" [icon]="faSquareMinus" (click)="deleteAdhesion(adhesion)"></fa-icon>
      <a href="https://{{adhesion.activite.lien}}" target="_blank">
        {{adhesion.activite.nom}} {{adhesion.activite.horaire}}</a> pour
      {{adhesion.adherent.prenom}} ({{adhesion.activite.tarif}}€)
    </div>

    <div type='button' class="btn btn-block btn-primary alod" (click)="saveAdhesions(newAdhesions)">Enregistrer la
      demande</div>

  </div>
  <div *ngIf="adhesions.length > 0" class="card card-container ">
    <div class="row griser" (click)="adhesionsOpen = !adhesionsOpen">
      <div *ngIf="adhesionsACompleter > 0" class="col-10" id="header">{{adhesionsACompleter>1?"Activités :
        "+adhesionsACompleter+" à completer":"Activité : "+adhesionsACompleter+" à completer"}}</div>

      <div *ngIf="adhesionsACompleter == 0" class="col-10" id="header">{{adhesions.length>1?"Activités :
        "+adhesions.length+" en cours":"Activité : "+adhesions.length+" en cours"}}</div>
      <div class="col-2" id="icon">
        <fa-icon *ngIf="!adhesionsOpen" class="pointer green fa-xl" [icon]="faSquareCaretLeft"
          container="body"></fa-icon>
        <fa-icon *ngIf="adhesionsOpen" class="pointer green fa-xl" [icon]="faSquareCaretDown"
          container="body"></fa-icon>

      </div>
    </div>


    <div *ngIf="mobile && adhesionsOpen">

      <div class="cadrePermanent" *ngFor="let adhesion of adhesions | orderBy:'id':true ">

        <h5>{{adhesion.activite.nom}} {{ adhesion.activite.horaire }} pour {{adhesion.adherent.prenom}}</h5>

        <i>Statut : {{ adhesion.statutActuel}}</i>


        <h5>Attestation de paiement</h5>
        <fa-icon *ngIf="adhesionValide(adhesion)" class="orange fa-2xl" (click)="openPDF(adhesion)"
          [icon]="faCloudDownloadAlt"></fa-icon>

        <h5>Paiement :</h5>

        <div *ngIf="!adhesion.validPaiementSecretariat">
          <p>Tarif : {{ adhesion.tarif }}€</p>
        </div>

        <div *ngIf="adhesion.validPaiementSecretariat">
          <p>Tarif : {{adhesion.tarif}} € réglé en {{adhesion.typeReglement.length>0?adhesion.typeReglement:"non
            renseigné"}}</p>
        </div>







        <h5>Documents :</h5>

        <ng-template #tipDocSecretariat>Le certificat médical n'est obligatoire<br />
          que dans le cas d'une réponse positive au questionnaire de santé
        </ng-template>
        <div *ngIf="adhesion.activite.certificatMedical" container="body" [ngbTooltip]="tipDocSecretariat"
          class="row align-items-center fullSize">
          <div class="col-10">Questionnaire de santé</div>
          <div class="col-2" (click)="openAttestationSante()"><fa-icon class="pointer orange fa-2xl"
              *ngIf="adhesion.activite.certificatMedical" [icon]="faCloudDownloadAlt"></fa-icon>
          </div>
        </div>

        <div *ngIf="adhesion.activite.certificatMedical" container="body" [ngbTooltip]="tipDocSecretariat"
          class="row align-items-center fullSize">
          <div class="col-10">Certificat médical</div>
          <div class="col-2" (click)="openCertifMed(adhesion.activite)"><fa-icon class="pointer orange fa-2xl"
              [icon]="faCloudDownloadAlt"></fa-icon>
          </div>
        </div>
        <div *ngIf="adhesion.activite.groupe == 'ALOD_B' && adhesion.adherent.mineur" container="body"
          [ngbTooltip]="tipDocSecretariat" class="row align-items-center fullSize">
          <div class="col-10">Doc de surclassement</div>
          <div class="col-2" (click)="openSurclassement()"><fa-icon class="pointer orange fa-2xl"
              [icon]="faCloudDownloadAlt"></fa-icon>
          </div>
        </div>



        <h5>Accords :</h5>
        <div *ngFor="let accord of adhesion.accords | orderBy:'id':false ">
          <div *ngIf="accord.nom == 'Attestation Sante'" class="row align-items-center fullSize">
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
              class="col-6">
              <b>Attestation de santé</b>
            </div>
            <div class="col-4" *ngIf="accord.datePassage != null">
              {{accord.datePassage | date: 'dd/MM/YYYY'}} <fa-icon
                (click)="openAccordModal(AttestSanteModal, accord, true)" class="pointer orange"
                [icon]="faCircleQuestion"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
              class="col-2">
              <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.datePassage == null"
              type='button' class="btn btn-block btn-primary col-12 alod"
              (click)="openAccordModal(AttestSanteModal, accord, false)">Merci de confirmer votre
              accord<br />d'attestation de
              santé
            </div>
          </div>

          <div *ngIf="accord.nom == 'Autorisation Parentale'" class="row align-items-center fullSize">
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-6">
              <b>Autorisation parentale</b>
            </div>
            <div class="col-4" *ngIf="accord.etat != null">
              {{accord.datePassage | date: 'dd/MM/YYYY'}}<fa-icon
                (click)="openAccordModal(AutParentModal, accord, true)" class="pointer orange"
                [icon]="faCircleQuestion"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
              class="col-2">
              <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
              class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(AutParentModal, accord, false)">
              Merci de
              confirmer votre accord<br />
              d'autorisation parentale
            </div>
          </div>


          <div *ngIf="accord.nom == 'Prise en Charge'" class="row align-items-center fullSize">
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-6">
              <b>Attestation de prise en charge</b>
            </div>
            <div class="col-4" *ngIf="accord.etat != null">
              {{accord.datePassage | date: 'dd/MM/YYYY'}}<fa-icon (click)="openAccordModal(AutPriseModal, accord, true)"
                class="pointer orange" [icon]="faCircleQuestion"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-2">
              <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
              class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(AutPriseModal, accord, false)">
              Merci de confirmer votre accord<br />d'attestation de prise en charge
            </div>
          </div>


          <div *ngIf="accord.nom == 'Vie du Club'" class="row align-items-center fullSize">
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-6">
              <b>Vie du club</b>
            </div>
            <div class="col-4" *ngIf="accord.etat != null">
              {{accord.datePassage | date: 'dd/MM/YYYY'}}<fa-icon (click)="openAccordModal(VieClubModal, accord, true)"
                class="pointer orange" [icon]="faCircleQuestion"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-2">
              <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
              class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(VieClubModal, accord, false)">Merci
              de confirmer votre accord<br />à la
              vie du club
            </div>


          </div>



          <div *ngIf="accord.nom == 'Reglement Interieur' " class="row align-items-center fullSize">

            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-6">
              <b>Règlement intérieur</b>
            </div>
            <div class="col-4" *ngIf="accord.etat != null">
              {{accord.datePassage | date: 'dd/MM/YYYY'}}<fa-icon (click)="openAccordModal(RegIntModal, accord, true)"
                class="pointer orange" [icon]="faCircleQuestion"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null" class="col-2">
              <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                *ngIf="accord.etat != true" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
            </div>
            <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
              class="btn btn-block btn-primary alod" (click)="openAccordModal(RegIntModal, accord, false)">
              Merci de confirmer votre accord<br />au règlement intérieur</div>

          </div>




          <button *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && !isAllAccordsDone(adhesion.accords)"
            type='button' class="btn btn-independent btn-outline-danger" disabled>
            Valider mon adhésion
          </button>
          <button *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && isAllAccordsDone(adhesion.accords)"
            type='button' class="btn btn-primary btn-independent" (click)="updateAdhesion(adhesion)">
            Valider mon adhésion
          </button>


        </div>

      </div>
    </div>

    <table *ngIf="!mobile && adhesionsOpen" class="table table-striped">
      <thead>
        <tr>
          <th class="center" scope="col">Activité</th>
          <th class="center" scope="col">Licencié</th>
          <th class="center" scope="col">Horaire</th>

          <th class="center" colspan="2" scope="col">Paiement</th>

          <th class="center" colspan="2" scope="col">Documents</th>

          <th class="center" scope="col">Accords</th>
          <th class="center" scope="col">Statut</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let adhesion of adhesions | orderBy:'id':true ">
          <td>
            {{adhesion.activite.nom}}
          </td>
          <td>{{adhesion.adherent.prenom}}</td>
          <td class="taillepetite">{{ adhesion.activite.horaire }}</td>


          <td>
            <div *ngIf="!adhesion.validPaiementSecretariat">
              {{ adhesion.tarif }}€
            </div>

            <div *ngIf="adhesion.validPaiementSecretariat">
              {{adhesion.tarif}} € en {{adhesion.typeReglement.length>0?adhesion.typeReglement:"non renseigné"}}
            </div>
          </td>


          <td>
            <div>
              <ng-template #tipReglementSecretariatOK>Le secrétariat a pris en compte votre paiement</ng-template>
              <fa-icon *ngIf="adhesion.validPaiementSecretariat" class="green fa-2xl" [icon]="faCircleCheck"
                container="body" [ngbTooltip]="tipReglementSecretariatOK"></fa-icon>
              <ng-template #tipReglementSecretariatKO>Le secrétariat n'a pas encore pris en compte votre
                paiement</ng-template>
              <fa-icon *ngIf="!adhesion.validPaiementSecretariat" class="orange fa-2xl" [icon]="faCircleXmark"
                container="body" [ngbTooltip]="tipReglementSecretariatKO"></fa-icon>
            </div>
          </td>
          <td>
            <ng-template #tipDocSecretariat>Le certificat médical n'est obligatoire<br />
              que dans le cas d'une réponse positive au questionnaire de santé
            </ng-template>
            <div *ngIf="adhesion.activite.certificatMedical" container="body" [ngbTooltip]="tipDocSecretariat">
              Questionnaire de santé <fa-icon class="pointer orange" *ngIf="adhesion.activite.certificatMedical"
                (click)="openAttestationSante()" [icon]="faCloudDownloadAlt"></fa-icon>
            </div>
            <div *ngIf="adhesion.activite.certificatMedical" container="body" [ngbTooltip]="tipDocSecretariat">
              Certificat médical <fa-icon class="pointer orange" (click)="openCertifMed(adhesion.activite)"
                [icon]="faCloudDownloadAlt"></fa-icon>
            </div>

            <div *ngIf="adhesion.activite.groupe == 'ALOD_B' && adhesion.adherent.mineur" container="body"
              [ngbTooltip]="tipDocSecretariat">
              Doc de surclassement <fa-icon class="pointer orange" (click)="openSurclassement()"
                [icon]="faCloudDownloadAlt"></fa-icon>
            </div>



          </td>


          <td>
            <div *ngIf="adhesion.activite.groupe != 'ALOD_B'">
              <ng-template #tipDocSecretariatOK>Le secrétariat a vérifié tous vos documents et accords</ng-template>
              <fa-icon *ngIf="adhesion.validDocumentSecretariat" class="green fa-2xl" [icon]="faCircleCheck"
                container="body" [ngbTooltip]="tipDocSecretariatOK"></fa-icon>
              <ng-template #tipDocSecretariatKO>Le secrétariat n'a pas encore vérifié tous vos documents et
                accords</ng-template>
              <fa-icon *ngIf="!adhesion.validDocumentSecretariat" class="orange fa-2xl" [icon]="faCircleXmark"
                container="body" [ngbTooltip]="tipDocSecretariatKO"></fa-icon>
            </div>
          </td>


          <td>

            <div *ngIf="showAdmin || showSecretaire" ngbDropdown id="icon">
              <div id="dropdownBasic1" ngbDropdownToggle>
                <fa-icon [icon]="faSquarePlus" container="body"></fa-icon>
              </div>

              <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="float:right;">
                <button ngbDropdownItem (click)="ajoutAccordAdhesion(adhesion,'Reglement Interieur')">Reglement
                  Interieur</button>
                <button ngbDropdownItem (click)="ajoutAccordAdhesion(adhesion,'Attestation Sante')">Attestation
                  Sante</button>
                <button ngbDropdownItem (click)="ajoutAccordAdhesion(adhesion,'Vie du Club')">Vie du Club</button>
                <button ngbDropdownItem (click)="ajoutAccordAdhesion(adhesion,'Autorisation Parentale')">Autorisation
                  Parentale</button>
                <button ngbDropdownItem (click)="ajoutAccordAdhesion(adhesion,'Prise en Charge')">Prise en
                  Charge</button>
              </div>
            </div>


            <div *ngFor="let accord of adhesion.accords | orderBy:'id':false ">

              <div *ngIf="accord.nom == 'Attestation Sante'" class="row align-items-center">
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
                  class="col-8">
                  <b>Attestation de santé</b><fa-icon *ngIf="showAdmin || showSecretaire"
                    (click)="openConfirmModalAccordAdhesion(confirmAccordAdhesionModal,adhesion,accord)" [icon]="faSquareMinus"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
                  class="col-4">
                  <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.datePassage == null"
                  type='button' class="btn btn-block btn-primary col-12 alod"
                  (click)="openAccordModal(AttestSanteModal, accord, false)">Merci de confirmer votre
                  accord<br />d'attestation de
                  santé
                </div>

                <div *ngIf="accord.datePassage != null && accord.etat == true">
                  Vous avez attesté de votre bonne santé à l'ALOD pour {{adhesion.adherent.prenom}} le
                  {{accord.datePassage | date:
                  'dd/MM/YYYY'}}<br>Vous n'avez pas de certificat médical à fournir.
                  <fa-icon (click)="openAccordModal(AttestSanteModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>
                <div *ngIf="accord.datePassage != null && accord.etat == false">
                  Vous n'avez pas accepté l'accord de l'attestation de santé à l'ALOD pour
                  {{adhesion.adherent.prenom}}
                  le
                  {{accord.datePassage | date:
                  'dd/MM/YYYY'}}<br>Vous devez fournir un certificat médical valide au secretariat ou
                  l'ajouter en PDF dans l'application (Ajout de documents)
                  <fa-icon (click)="openAccordModal(AttestSanteModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>

              </div>



              <div *ngIf="accord.nom == 'Autorisation Parentale'" class="row align-items-center">

                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-8">
                  <b>Autorisation parentale</b><fa-icon *ngIf="showAdmin || showSecretaire"
                    (click)="openConfirmModalAccordAdhesion(confirmAccordAdhesionModal,adhesion,accord)" [icon]="faSquareMinus"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.datePassage != null"
                  class="col-4">
                  <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
                  class="btn btn-block btn-primary col-12 alod"
                  (click)="openAccordModal(AutParentModal, accord, false)">Merci de
                  confirmer votre accord<br />
                  d'autorisation parentale
                </div>

                <div *ngIf="accord.etat != null">
                  Vous avez donné votre autorisation parentale à l'ALOD pour {{adhesion.adherent.prenom}} le
                  {{accord.datePassage | date: 'dd/MM/YYYY'}}
                  <fa-icon (click)="openAccordModal(AutParentModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>
              </div>


              <div *ngIf="accord.nom == 'Prise en Charge'" class="row align-items-center">

                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-8"><b>Attestation de prise en charge</b><fa-icon *ngIf="showAdmin || showSecretaire"
                    (click)="openConfirmModalAccordAdhesion(confirmAccordAdhesionModal,adhesion,accord)" [icon]="faSquareMinus"></fa-icon></div>
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-4">
                  <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
                  class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(AutPriseModal, accord, false)">
                  Merci de confirmer votre accord<br />d'attestation de prise en charge
                </div>

                <div *ngIf="accord.etat != null">
                  Vous avez donné votre autorisation de prise en charge à l'ALOD pour {{adhesion.adherent.prenom}}
                  le
                  {{accord.datePassage | date: 'dd/MM/YYYY'}}
                  <fa-icon (click)="openAccordModal(AutPriseModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>
              </div>




              <div *ngIf="accord.nom == 'Vie du Club'" class="row align-items-center ">

                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-8"><b>Vie du club</b><fa-icon *ngIf="showAdmin || showSecretaire"
                    (click)="openConfirmModalAccordAdhesion(confirmAccordAdhesionModal,adhesion,accord)" [icon]="faSquareMinus"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-4 ">
                  <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="accord.etat == false" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
                  class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(VieClubModal, accord, false)">
                  Merci de confirmer votre accord<br />à la
                  vie du club
                </div>

                <div *ngIf="accord.etat != null">
                  Vous avez accepté de participer à la vie du club le {{accord.datePassage | date: 'dd/MM/YYYY'}}
                  <fa-icon (click)="openAccordModal(VieClubModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>

              </div>



              <div *ngIf="accord.nom == 'Reglement Interieur'" class="row align-items-center">
                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-8"><b>Règlement intérieur</b><fa-icon *ngIf="showAdmin || showSecretaire"
                    (click)="openConfirmModalAccordAdhesion(confirmAccordAdhesionModal,adhesion,accord)" [icon]="faSquareMinus"></fa-icon></div>

                <div *ngIf="adhesion.statutActuel != 'Attente validation adhérent' || accord.etat != null"
                  class="col-4 ">
                  <fa-icon *ngIf="accord.etat == true" class="green fa-2xl" [icon]="faCircleCheck"></fa-icon><fa-icon
                    *ngIf="accord.etat != true" class="orange fa-2xl" [icon]="faCircleXmark"></fa-icon>
                </div>
                <div *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && accord.etat == null" type='button'
                  class="btn btn-block btn-primary col-12 alod" (click)="openAccordModal(RegIntModal, accord, false)">
                  Merci de confirmer votre accord<br />au règlement intérieur</div>
                <div *ngIf="accord.etat != null">
                  Vous avez accepté le règlement intérieur de l'ALOD {{accord.datePassage | date: 'dd/MM/YYYY'}}
                  <fa-icon (click)="openAccordModal(RegIntModal, accord, true)" class="pointer orange"
                    [icon]="faCircleQuestion"></fa-icon>
                </div>
              </div>
            </div>
          </td>

          <td class="center">{{ adhesion.statutActuel}}<br />
            <h5 *ngIf="adhesionValide(adhesion)">Attestation de paiement</h5>
            <fa-icon *ngIf="adhesionValide(adhesion)" class="orange fa-2xl" (click)="openPDF(adhesion)"
              [icon]="faCloudDownloadAlt"></fa-icon>

            <ng-template #tipPasValide><b>Validation demande d'adhésion</b><br />
              Vous devez d'abord répondre aux accords (colonne précédente)
            </ng-template>


            <button container="body" [ngbTooltip]="tipPasValide"
              *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && !isAllAccordsDone(adhesion.accords)"
              type='button' class="btn btn-independent btn-outline-danger">
              Valider mon adhésion
            </button>
            <button *ngIf="adhesion.statutActuel == 'Attente validation adhérent' && isAllAccordsDone(adhesion.accords)"
              type='button' class="btn btn-primary btn-independent" (click)="updateAdhesion(adhesion)">
              Valider mon adhésion
            </button>
          </td>
        </tr>
      </tbody>
    </table>

  </div>


  <div *ngIf="totalRestantDu != 0" class="card card-container ">

    <div class="row griser" (click)="PaiementsOpen = !PaiementsOpen">
      <div *ngIf="mobile" class="col-10" id="header">Paiement : {{totalRestantDu}}€ à payer</div>
      <div *ngIf="!mobile" class="col-10" id="header">Paiement : {{totalRestantDu}}€ à payer ou non encore pris en
        compte par le secretariat</div>
      <div class="col-2" id="icon">
        <fa-icon *ngIf="!PaiementsOpen" class="pointer green fa-xl" [icon]="faSquareCaretLeft"
          container="body"></fa-icon>
        <fa-icon *ngIf="PaiementsOpen" class="pointer green fa-xl" [icon]="faSquareCaretDown"
          container="body"></fa-icon>

      </div>
    </div>

    <div *ngIf="PaiementsOpen">

      <table class="table table-striped">
        <thead>
          <tr>
            <th class="center" scope="col">Activité</th>
            <th class="center" scope="col">Licencié</th>

            <th class="center" scope="col">Tarif</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let adhesion of adhesionPaiement | orderBy:'id':true ">
            <td>
              {{adhesion.activite.nom}}<br />
              {{ adhesion.activite.horaire }}
            </td>
            <td>{{adhesion.adherent.prenom}}</td>
            <td>
              <div>
                {{ adhesion.tarif }}€
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="3"><b>Montant total :
                {{totalRestantDu}}€ </b></td>
          </tr>
        </tbody>
      </table>



      <iframe *ngIf="helloassoAlod" id="haWidget" allowtransparency="true" scrolling="auto"
        src="https://www.helloasso.com/associations/alod/adhesions/alod-2023-2024/widget"
        style="width: 100%; height: 750px; border: none;"></iframe>

      <iframe *ngIf="helloassoAlod3X" id="haWidget" allowtransparency="true" scrolling="auto"
        src="https://www.helloasso.com/associations/alod/adhesions/alod-2023-2024-paiement-en-3-fois/widget"
        style="width: 100%; height: 750px; border: none;"></iframe>

      <div *ngIf="totalRestantDu != 0 && showHelloAsso" type='button' class="btn btn-primary alod btn-independent"
        (click)="helloassoAlod = !helloassoAlod">Paiement via HelloAsso</div>

      <div *ngIf="totalRestantDu != 0 && showHelloAsso" type='button' class="btn btn-primary alod btn-independent"
        (click)="helloassoAlod3X = !helloassoAlod3X">Paiement via HelloAsso en 3X</div>

    </div>
  </div>
</div>

















<ng-template #editPDFModal let-c="close" let-d="dismiss" let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{pdfName}}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismiss()"></button>
  </div>
  <div class="modal-body modal-fullsize modalFullHeight">

    <pdf-viewer [src]="pdfEditSrc" [render-text]="true" [original-size]="false"></pdf-viewer>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="dismiss()">Fermer</button>
  </div>

</ng-template>


<ng-template #addPDFModal let-c="close" let-d="dismiss" let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{pdfName}} </h4>
    <h4 *ngIf="!pdfName" class="modal-title" id="modal-basic-title">Ajouter un document</h4>&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="file" (change)="loadFile($event)" accept=".pdf">
    <button type="button" class="btn-close" aria-label="Close" (click)="dismiss()"></button>
  </div>
  <div class="modal-body modal-fullsize modalFullHeight">

    <pdf-viewer *ngIf="!isFailedPopup" [src]="pdfSrc" [render-text]="true" [original-size]="false"></pdf-viewer>

    <div *ngIf="isFailedPopup">
      <b>
        <font color="red">{{messagePopup}}</font>
      </b>
    </div>
  </div>
  <div class="modal-footer">
    <a class="left" href="https://www.adobe.com/fr/acrobat/mobile/scanner-app.html" target="_blank">ADOBE scanner
      PDF</a>
    <button *ngIf="isFailedPopup" type="submit" class="btn btn-primary" disabled>Ajouter ce document</button>

    <button *ngIf="!isFailedPopup" type="submit" class="btn btn-primary" (click)="uploadFile()">Ajouter ce
      document</button>

  </div>

</ng-template>



<ng-template #confirmAccordAdherentModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Suppression Accord</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Vous êtes sur le point de supprimer l'accord {{selectedAccord.nom}}<br />
    de {{selectedAdherent.prenom}}
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="retraitAccord(selectedAdherent,selectedAccord)">Valider</button>
  </div>
</ng-template>

<ng-template #confirmAccordAdhesionModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Suppression Accord</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Vous êtes sur le point de supprimer l'accord {{selectedAccord.nom}}<br />
    de l'activitée {{selectedAdhesion.activite?.nom}}
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="retraitAccordAdhesion(selectedAdhesion,selectedAccord)">Valider</button>
  </div>
</ng-template>




<ng-template #confirmModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Suppression</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Vous êtes sur le point de supprimer l'adhérent {{selectedAdherent.prenom}}<br />
    {{selectedAdherent.adhesions.length > 0?"Toutes ses adhésions seront également supprimées":"" }}
    <br />
    {{selectedAdherent.referent?"C'est le référent du groupe, tous les adhérents du groupe":"" }}
    <br />

  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="acceptSupress(selectedAdherent)">Valider</button>
  </div>
</ng-template>






<ng-template #RGPDModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Utilisation des données personnelles:</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Les informations recueillies sur ce formulaire sont enregistrées dans un fichier informatisé par le
    secrétariat de l'ALOD pour permettre le fonctionnement des activités. La base légale du traitement est
    le
    contrat entre l'ALOD et le futur adhérent/liciencié.<br />
    Les données collectées seront communiquées aux seuls destinataires suivants : secrétariat de l'ALOD de
    l'UFOLEP et de la FAL.<br />

    Les données sont conservées pendant toute la durée des activitées aux quelles l'adhérent/licencié à
    souscrit
    au sein de l'ALOD suivi d'une année d'historisation.<br />

    Vous pouvez accéder aux données vous concernant, les rectifier, demander leur effacement ou exercer
    votre
    droit à la limitation du traitement de vos données.<br />

    Consultez le site <a href="https://www.cnil.fr" target="_blank">www.cnil.fr</a> pour plus d’informations
    sur vos
    droits.<br />

    Pour exercer ces droits ou pour toute question sur le traitement de vos données dans ce dispositif, vous
    pouvez contacter (le cas échéant, notre délégué à la protection des données ou le service chargé de
    l’exercice de ces droits) : alod.amicale@gmail.com <br />
    Si vous estimez, après nous avoir contactés, que vos droits « Informatique et Libertés » ne sont pas
    respectés, vous pouvez adresser une réclamation à la CNIL.<br />

  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Valider</button>
  </div>
</ng-template>


<ng-template #ImageModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Droit à l'image</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    J'autorise l'ALOD à utiliser les photographies, films, travaux et productions réalisés dans le
    cadre de l'activité sportive.
    Nous utiliserons les photos et autres médias pris durant
    les cours pour la promotion de l'ALOD (site internet, affiches, flyer, forum des associations)<br />
    <b>Pour les adhérents du Basket, l'acceptation du droit à l'image est compris dans l'adhésion à la
      FFBB.</b>
  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, false)">Refuser</button>
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Valider</button>
  </div>
</ng-template>








<ng-template #AutPriseModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Attestation de prise en charge</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    J'autorise l'animateur, entraineur ou administrateur de l'ALOD<br />
    à venir chercher votre enfant à l'école ou<br />
    au périscolaire de l'école OucheDinier afin de l'emmener à son cours<br />
  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, false)">Refuser</button>
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Valider</button>
  </div>
</ng-template>

<ng-template #RegIntModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Règlement intérieur</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Vous vous inscrivez à une activité au sein de l’ALOD (Amicale Laïque de L’Ouche Dinier). <br />
    <b>Vous pouvez consulter les statuts et toutes les informations concernant cette association sur
      le site : <a href="https://www.alod.fr" target="_blank">www.alod.fr</a></b><br /> <br />
    Inscriptions et cours <br />
    Les inscriptions aux activités sont valables pour la période de septembre à juin. <br />
    1 cours d’essai est possible avant l’inscription selon les modalités de l’activité si le cours
    n’est pas complet. <br />
    Toute inscription est définitive<br />
    Vous pouvez participer à l’activité quand votre dossier d’inscription est complet.<br />
    Aucun remboursement ne pourra être demandé<br /><br />
    Seule la présentation au cours du premier trimestre d’un certificat médical de contre-
    indication précisant l’activité pratiquée, avec restitution de la carte de la FAL, pourra faire
    l’objet d’un remboursement partiel déduction faite des frais engagés (carte FAL, frais
    administratifs ALOD, cotisation 1er trimestre).<br />
    Les cas de force majeure justifiés (mutation professionnelle, déménagement,...) survenus au
    cours du 1er trimestre feront l’objet d’un remboursement partiel.<br />
    L’ALOD propose 25 à 30 cours par an en fonction du calendrier
    (jours fériés), des disponibilités des animateurs, etc. Un cours annulé sera reporté ou non
    selon les possibilités (disponibilités de l’animateur, de salles,...). En aucun cas, un
    remboursement ne pourra être demandé pour l’annulation de cours dans la limite des 25
    cours/an, ni en cas de circonstance(s) exceptionnelle(s).<br /><br />
    Fonctionnement des sections<br />
    Chaque section est représentée par un ou des référents responsables agréé(s) par le Conseil
    d’Administration. Ils mettent en application auprès des animateurs les décisions prises en
    Assemblée Générale et par le Conseil d’Administration.<br />
    En cas de litige dans une section, le Conseil d’Administration convoquera les référents et les
    animateurs et prendra les décisions adéquates.<br />
    A l’Assemblée Générale, l’animateur ou un responsable de la section peut présenter un
    compte rendu de la saison écoulée.<br /><br />
    Fonctionnement de l’Amicale<br />
    L’Amicale laïque de l’Ouche Dinier est administrée par un Conseil d’Administration.<br />
    Aucun membre du Conseil d’Administration ne peut se servir de ce titre s’il n’est délégué
    officiellement à cet effet. L’administrateur assiste régulièrement aux réunions du Conseil
    d’Administration. Des absences répétées sans excuse pourront entraîner l’exclusion après
    entretien entre l’intéressé et le Conseil d’Administration. Les représentants de l’Amicale dans
    différentes instances doivent être agréés par le Conseil d’Administration.<br />
    Une section ne peut s’ouvrir que sur décision du Conseil d’Administration.<br />
    <br />
  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Accepter</button>
  </div>
</ng-template>

<ng-template #VieClubModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Adhésion à la vie du club</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    J'accepte également de participer,<br />
    dans la limite de mes possibilités et de manière collective,<br />
    aux déplacements de l'équipe,<br />
    aux responsabilités d'arbitre ou de marqueur/chronométreur<br />
    et de tenir le bar à tour de rôle<br />
    pendant les matchs de mon enfant ou de mon équipe.<br />
  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Accepter</button>
  </div>
</ng-template>


<ng-template #AttestSanteModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Attestation de santé</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Le certificat médical n'est obligatoire<br />
    que dans le cas d'une réponse positive au questionnaire de santé<br />

    <a href="https://www.alod.fr/wp-content/uploads/2022/04/INSCRIPTION-Questionnaire_de_sante.pdf"
      target="_blank">questionnaire de santé</a><br>
    Si vous avez répondu Non à toutes les questions du questionnaire,<br>
    vous pouvez valider cet accord d'attestation de votre bonne santé.<br>
    Sinon refusez le pour signifier au secrétariat que vous devrez fournir un certificat
    médical<br>

  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, false)">Refuser</button>
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Accepter</button>
  </div>
</ng-template>

<ng-template #AutParentModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Autorisation Parentale</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismissSupress()"></button>
  </div>
  <div class="modal-body">
    Vous venez d'inscrire votre enfant à une activité de l'ALOD.<br />
    Les parents doivent s'assurer de la présence de l'animateur avant de laisser leurs enfants devant
    ou
    dans la salle<br />
    et venir les reprendre à l'heure à l'issue de l'activité.<br />
    En dehors des heures d'activités, la responsabilité de l'ALOD n'est plus engagée.<br />
    Les animateurs de l'ALOD sont autorisés à faire pratiquer des soins d'urgence en cas de
    besoin<br />


  </div>
  <div *ngIf="!consultation" class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, false)">Refuser</button>
    <button type="submit" class="btn btn-primary" (click)="reponseAccord(selectedAccord, true)">Valider</button>
  </div>
</ng-template>